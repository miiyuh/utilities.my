{"version":3,"file":"L.Terminator-Cw2jOqUp.js","sources":["../../node_modules/@joergdietrich/leaflet.terminator/L.Terminator.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('leaflet')) :\n\ttypeof define === 'function' && define.amd ? define(['leaflet'], factory) :\n\t(global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.L = global.L || {}, global.L.terminator = factory(global.L)));\n})(this, (function (L) { 'use strict';\n\n\t/* Terminator.js -- Overlay day/night region on a Leaflet map */\n\n\tfunction julian(date) {\n\t\t/* Calculate the present UTC Julian Date. Function is valid after\n\t\t * the beginning of the UNIX epoch 1970-01-01 and ignores leap\n\t\t * seconds. */\n\t\treturn (date / 86400000) + 2440587.5;\n\t}\n\n\tfunction GMST(julianDay) {\n\t\t/* Calculate Greenwich Mean Sidereal Time according to \n\t\t\t http://aa.usno.navy.mil/faq/docs/GAST.php */\n\t\tvar d = julianDay - 2451545.0;\n\t\t// Low precision equation is good enough for our purposes.\n\t\treturn (18.697374558 + 24.06570982441908 * d) % 24;\n\t}\n\n\tvar Terminator = L.Polygon.extend({\n\t\toptions: {\n\t\t\tinteractive: false, // Disable \"clickable\" mouse pointer\n\t\t\tcolor: '#00',\n\t\t\topacity: 0.5,\n\t\t\tfillColor: '#00',\n\t\t\tfillOpacity: 0.5,\n\t\t\tresolution: 2,\n\t\t\tlongitudeRange: 720\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.version = '0.1.0';\n\t\t\tthis._R2D = 180 / Math.PI;\n\t\t\tthis._D2R = Math.PI / 180;\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tvar latLng = this._compute(this.options.time);\n\t\t\tthis.setLatLngs(latLng);\n\t\t},\n\n\t\tsetTime: function (date) {\n\t\t\tthis.options.time = date;\n\t\t\tvar latLng = this._compute(date);\n\t\t\tthis.setLatLngs(latLng);\n\t\t},\n\n\t\t_sunEclipticPosition: function (julianDay) {\n\t\t\t/* Compute the position of the Sun in ecliptic coordinates at\n\t\t\t\t julianDay.  Following\n\t\t\t\t http://en.wikipedia.org/wiki/Position_of_the_Sun */\n\t\t\t// Days since start of J2000.0\n\t\t\tvar n = julianDay - 2451545.0;\n\t\t\t// mean longitude of the Sun\n\t\t\tvar L = 280.460 + 0.9856474 * n;\n\t\t\tL %= 360;\n\t\t\t// mean anomaly of the Sun\n\t\t\tvar g = 357.528 + 0.9856003 * n;\n\t\t\tg %= 360;\n\t\t\t// ecliptic longitude of Sun\n\t\t\tvar lambda = L + 1.915 * Math.sin(g * this._D2R) +\n\t\t\t\t0.02 * Math.sin(2 * g * this._D2R);\n\t\t\t// distance from Sun in AU\n\t\t\tvar R = 1.00014 - 0.01671 * Math.cos(g * this._D2R) -\n\t\t\t\t0.0014 * Math.cos(2 * g * this._D2R);\n\t\t\treturn {lambda: lambda, R: R};\n\t\t},\n\n\t\t_eclipticObliquity: function (julianDay) {\n\t\t\t// Following the short term expression in\n\t\t\t// http://en.wikipedia.org/wiki/Axial_tilt#Obliquity_of_the_ecliptic_.28Earth.27s_axial_tilt.29\n\t\t\tvar n = julianDay - 2451545.0;\n\t\t\t// Julian centuries since J2000.0\n\t\t\tvar T = n / 36525;\n\t\t\tvar epsilon = 23.43929111 -\n\t\t\t\tT * (46.836769 / 3600\n\t\t\t\t\t- T * (0.0001831 / 3600\n\t\t\t\t\t\t+ T * (0.00200340 / 3600\n\t\t\t\t\t\t\t- T * (0.576e-6 / 3600\n\t\t\t\t\t\t\t\t- T * 4.34e-8 / 3600))));\n\t\t\treturn epsilon;\n\t\t},\n\n\t\t_sunEquatorialPosition: function (sunEclLng, eclObliq) {\n\t\t\t/* Compute the Sun's equatorial position from its ecliptic\n\t\t\t * position. Inputs are expected in degrees. Outputs are in\n\t\t\t * degrees as well. */\n\t\t\tvar alpha = Math.atan(Math.cos(eclObliq * this._D2R)\n\t\t\t\t* Math.tan(sunEclLng * this._D2R)) * this._R2D;\n\t\t\tvar delta = Math.asin(Math.sin(eclObliq * this._D2R)\n\t\t\t\t* Math.sin(sunEclLng * this._D2R)) * this._R2D;\n\n\t\t\tvar lQuadrant = Math.floor(sunEclLng / 90) * 90;\n\t\t\tvar raQuadrant = Math.floor(alpha / 90) * 90;\n\t\t\talpha = alpha + (lQuadrant - raQuadrant);\n\n\t\t\treturn {alpha: alpha, delta: delta};\n\t\t},\n\n\t\t_hourAngle: function (lng, sunPos, gst) {\n\t\t\t/* Compute the hour angle of the sun for a longitude on\n\t\t\t * Earth. Return the hour angle in degrees. */\n\t\t\tvar lst = gst + lng / 15;\n\t\t\treturn lst * 15 - sunPos.alpha;\n\t\t},\n\n\t\t_latitude: function (ha, sunPos) {\n\t\t\t/* For a given hour angle and sun position, compute the\n\t\t\t * latitude of the terminator in degrees. */\n\t\t\tvar lat = Math.atan(-Math.cos(ha * this._D2R) /\n\t\t\t\tMath.tan(sunPos.delta * this._D2R)) * this._R2D;\n\t\t\treturn lat;\n\t\t},\n\n\t\t_compute: function (time) {\n\t\t\tvar today = time ? new Date(time) : new Date();\n\t\t\tvar julianDay = julian(today);\n\t\t\tvar gst = GMST(julianDay);\n\t\t\tvar latLng = [];\n\n\t\t\tvar sunEclPos = this._sunEclipticPosition(julianDay);\n\t\t\tvar eclObliq = this._eclipticObliquity(julianDay);\n\t\t\tvar sunEqPos = this._sunEquatorialPosition(sunEclPos.lambda, eclObliq);\n\t\t\tfor (var i = 0; i <= this.options.longitudeRange * this.options.resolution; i++) {\n\t\t\t\tvar lng = -this.options.longitudeRange/2 + i / this.options.resolution;\n\t\t\t\tvar ha = this._hourAngle(lng, sunEqPos, gst);\n\t\t\t\tlatLng[i + 1] = [this._latitude(ha, sunEqPos), lng];\n\t\t\t}\n\t\t\tif (sunEqPos.delta < 0) {\n\t\t\t\tlatLng[0] = [90, -this.options.longitudeRange/2];\n\t\t\t\tlatLng[latLng.length] = [90, this.options.longitudeRange/2];\n\t\t\t} else {\n\t\t\t\tlatLng[0] = [-90, -this.options.longitudeRange/2];\n\t\t\t\tlatLng[latLng.length] = [-90, this.options.longitudeRange/2];\n\t\t\t}\n\t\t\treturn latLng;\n\t\t}\n\t});\n\n\tfunction terminator(options) {\n\t\treturn new Terminator(options);\n\t}\n\n\treturn terminator;\n\n}));\n"],"names":["global","factory","module","require$$0","this","L","julian","date","GMST","julianDay","d","Terminator","options","latLng","g","lambda","R","T","epsilon","sunEclLng","eclObliq","alpha","delta","lQuadrant","raQuadrant","lng","sunPos","gst","lst","ha","lat","time","today","sunEclPos","sunEqPos","i","terminator"],"mappings":"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","x_google_ignoreList":[0]}